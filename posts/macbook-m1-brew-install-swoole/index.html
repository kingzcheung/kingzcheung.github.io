<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Macbook M1 brew å®‰è£… swoole å¸¸è§é—®é¢˜ - KC BLOG</title><link rel="icon" type="image/png" href=icons/favicon.ico /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Macbook M1 brew å®‰è£… swoole å¸¸è§é—®é¢˜" />
<meta property="og:description" content="è§£å†³æ­¥éª¤å¦‚ä¸‹
å°è¯•å®‰è£… å®‰è£…å‘½ä»¤å¦‚ä¸‹:
pecl install swoole ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šfatal error: &lsquo;openssl/ssl." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kingzcheung.github.io/posts/macbook-m1-brew-install-swoole/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-27T11:18:47&#43;08:00" />
<meta property="article:modified_time" content="2021-04-27T11:18:47&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Macbook M1 brew å®‰è£… swoole å¸¸è§é—®é¢˜"/>
<meta name="twitter:description" content="è§£å†³æ­¥éª¤å¦‚ä¸‹
å°è¯•å®‰è£… å®‰è£…å‘½ä»¤å¦‚ä¸‹:
pecl install swoole ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šfatal error: &lsquo;openssl/ssl."/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel="stylesheet">

	<link rel="stylesheet" type="text/css" media="screen" href="https://kingzcheung.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://kingzcheung.github.io/css/main.css" />
	<link rel="stylesheet" type="text/css" href="https://kingzcheung.github.io/css/custom.css" />
	<link rel="stylesheet" type="text/css" href="https://kingzcheung.github.io/css/dark.css"  />
	<link rel="stylesheet" type="text/css" href="https://kingzcheung.github.io/css/custom-dark.css"  />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<script src="https://kingzcheung.github.io/js/main.js"></script>
	<script src="https://kingzcheung.github.io/js/abc.js"></script>
	<script src="https://kingzcheung.github.io/js/xyz.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<base href="https://kingzcheung.github.io/">
	<h1 class="site-title"><a href="https://kingzcheung.github.io/">KC BLOG</a></h1>
	<div class="site-description"><h2>ç¬”è®°å°ç«™ - åšä¸ªè®¤çœŸçš„äºº</h2><nav class="nav social">
			<ul class="flat"><a href="https://github.com/kingzcheung" title="Github"><i data-feather="github"></i></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">Macbook M1 brew å®‰è£… swoole å¸¸è§é—®é¢˜</h1>
			<div class="meta">Posted at &mdash; Apr 27, 2021</div>
		</div>

		<div class="markdown">
			<p>è§£å†³æ­¥éª¤å¦‚ä¸‹</p>
<h3 id="å°è¯•å®‰è£…">å°è¯•å®‰è£…</h3>
<p>å®‰è£…å‘½ä»¤å¦‚ä¸‹:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pecl install swoole
</code></pre></div><h3 id="ç¬¬ä¸€ä¸ªé—®é¢˜fatal-error-opensslsslh-file-not-found">ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šfatal error: &lsquo;openssl/ssl.h&rsquo; file not found</h3>
<p>è¿™ä¸ªä¸æ˜¯M1çš„é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨brew æ›´æ–°è¿‡opensslï¼Œå¤§æ¦‚ç‡éƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>åŸå› æ˜¯æ‰¾ä¸åˆ° openssl çš„ç›¸å…³ç±»åº“è·¯å¾„ï¼ˆå¯èƒ½æ˜¯brew å®‰è£…çš„åŸå› ï¼‰ï¼Œå¦‚æœä½ ä¸æƒ³åŠ¨opensslçš„ç›¸å…³ä¸œè¥¿çš„è¯ï¼Œopenssl å…¶å®æä¾›äº†ä¸¤ä¸ªç¯å¢ƒå˜é‡: <code>LDFLAGS</code>ã€<code>CPPFLAGS</code>ã€‚è¿™ä¸ªåœ¨ä½¿ç”¨brew å®‰è£… opensslçš„æ—¶å€™å…¶å®æœ‰ç»™å‡ºã€‚å¦‚æœä¸çŸ¥é“å€¼æ˜¯å¤šå°‘å¯ä»¥é€šè¿‡<code>brew reinstall openssl</code> çœ‹çœ‹ brew ç»™çš„ç»“æœï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ brew reinstall <span style="color:#268bd2">openssl</span>
<span style="color:#719e07">==</span>&gt; Downloading https://ghcr.io/v2/homebrew/core/openssl/1.1/manifests/1.1.1k
Already downloaded: /Users/kingzcheung/Library/Caches/Homebrew/downloads/2efe91096994c33489c066631735a35cc3863cae64fc2ad5b305675fe9d24fed--openssl@1.1-1.1.1k.bottle_manifest.json
<span style="color:#719e07">==</span>&gt; Downloading https://ghcr.io/v2/homebrew/core/openssl/1.1/blobs/sha256:0a75e0f116c0653bc7a2b422e5dc500e7e51557303aa4fca9c1a28786189c1da
Already downloaded: /Users/kingzcheung/Library/Caches/Homebrew/downloads/5808c4424ac006e0ed6bb4ae6b4e716151c0fd953ed73b05d7e3885c6a7cfaa9--openssl@1.1--1.1.1k.arm64_big_sur.bottle.tar.gz
<span style="color:#719e07">==</span>&gt; Reinstalling openssl@1.1
<span style="color:#719e07">==</span>&gt; Pouring openssl@1.1--1.1.1k.arm64_big_sur.bottle.tar.gz
<span style="color:#719e07">==</span>&gt; Regenerating CA certificate bundle from keychain, this may take a <span style="color:#719e07">while</span>...
<span style="color:#719e07">==</span>&gt; Caveats
A CA file has been bootstrapped using certificates from the system
keychain. To add additional certificates, place .pem files in
  /opt/homebrew/etc/openssl@1.1/certs

and run
  /opt/homebrew/opt/openssl@1.1/bin/c_rehash

openssl@1.1 is keg-only, which means it was not symlinked into /opt/homebrew,
because macOS provides LibreSSL.

If you need to have openssl@1.1 first in your PATH, run:
  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#39;export PATH=&#34;/opt/homebrew/opt/openssl@1.1/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.zshrc

For compilers to find openssl@1.1 you may need to set:
  <span style="color:#b58900">export</span> <span style="color:#268bd2">LDFLAGS</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;-L/opt/homebrew/opt/openssl@1.1/lib&#34;</span>
  <span style="color:#b58900">export</span> <span style="color:#268bd2">CPPFLAGS</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;-I/opt/homebrew/opt/openssl@1.1/include&#34;</span>

<span style="color:#719e07">==</span>&gt; Summary
ğŸº  /opt/homebrew/Cellar/openssl@1.1/1.1.1k: 8,071 files, 18MB
</code></pre></div><p>å› æ­¤æˆ‘ä»¬çš„å®‰è£…å‘½ä»¤å˜æˆè¿™æ ·ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#268bd2">LDFLAGS</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;-L/opt/homebrew/opt/openssl@1.1/lib&#34;</span> <span style="color:#268bd2">CPPFLAGS</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;-I/opt/homebrew/opt/openssl@1.1/include&#34;</span> pecl install swoole
</code></pre></div><p>å®‰è£…swooleæ—¶ä¼šæœ‰å®‰è£…æ‰©å±•é€‰é¡¹éœ€è¦è¾“å…¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡pecl çš„ <code>--configureoptions </code> ä¼ å…¥ï¼Œå› æ­¤å‘½ä»¤æœ€åå˜æˆè¿™æ ·å­ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#268bd2">LDFLAGS</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;-L/opt/homebrew/opt/openssl@1.1/lib&#34;</span> <span style="color:#268bd2">CPPFLAGS</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;-I/opt/homebrew/opt/openssl@1.1/include&#34;</span> pecl install --configureoptions <span style="color:#2aa198">&#39;enable-sockets=&#34;yes&#34; enable-openssl=&#34;yes&#34; enable-http2=&#34;yes&#34; enable-mysqlnd=&#34;yes&#34; enable-swoole-json=&#34;no&#34; enable-swoole-curl=&#34;yes&#34; &#39;</span> swoole
</code></pre></div><h3 id="ç¬¬äºŒä¸ªé—®é¢˜-æç¤º-pcre2h-file-not-found">ç¬¬äºŒä¸ªé—®é¢˜ï¼š æç¤º pcre2.h file not found</h3>
<p>éœ€è¦å®‰è£… pcreã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">brew install pcre
</code></pre></div><p>ä½†æ˜¯æ­¤æ—¶ä¾ç„¶æ²¡æœ‰è§£å†³ï¼Œå› æ­¤å’Œä¸Šé¢çš„ç±»ä¼¼ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡è½¯è¿æ¥è§£å†³ã€‚</p>
<p>æ‰¾åˆ°brew å®‰è£…çš„pcre ä¸­<code>pcre2.h</code>çš„æ‰€åœ¨ç›®å½•:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">/opt/homebrew/Cellar/pcre2/10.36/include/pcre2.h
</code></pre></div><p>è¿æ¥åˆ°PHPï¼ˆæˆ‘è¿™æ˜¯ç”¨<code>brew install php@8.0</code>å®‰è£…çš„php8.0.3ï¼‰</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ln -s /opt/homebrew/Cellar/pcre2/10.36/include/pcre2.h /opt/homebrew/Cellar/php/8.0.3/include/php/ext/pcre/pcre2.h
</code></pre></div><h3 id="ç¬¬ä¸‰ä¸ªé—®é¢˜error-failed-to-mkdir-opthomebrewcellarphpxxxpecl20200930">ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šERROR: failed to mkdir /opt/homebrew/Cellar/php/xxx/pecl/20200930</h3>
<blockquote>
<p>xxx è¡¨ç¤ºå…·ä½“ç‰ˆæœ¬å·ï¼Œæˆ‘è¿™é‡Œæ˜¯8.0.3</p>
</blockquote>
<p>è¿™é‡Œæç¤ºæ— æ³•åœ¨<code>/opt/homebrew/Cellar/php/8.0.3/pecl</code> åˆ›å»º<code>20200930</code>ç›®å½•ã€‚</p>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹<code>/opt/homebrew/Cellar/php/8.0.3</code></p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ls -la 
total <span style="color:#2aa198">96</span>
drwxr-xr-x  <span style="color:#2aa198">15</span> kingzcheung  admin    <span style="color:#2aa198">480</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 .
drwxr-xr-x   <span style="color:#2aa198">3</span> kingzcheung  admin     <span style="color:#2aa198">96</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 ..
drwxr-xr-x   <span style="color:#2aa198">4</span> kingzcheung  admin    <span style="color:#2aa198">128</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 .bottle
drwxr-xr-x   <span style="color:#2aa198">3</span> kingzcheung  admin     <span style="color:#2aa198">96</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 .brew
-rw-r--r--   <span style="color:#2aa198">1</span> kingzcheung  admin   <span style="color:#2aa198">4985</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 INSTALL_RECEIPT.json
-rw-r--r--   <span style="color:#2aa198">1</span> kingzcheung  admin   <span style="color:#2aa198">3204</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 LICENSE
-rw-r--r--   <span style="color:#2aa198">1</span> kingzcheung  admin  <span style="color:#2aa198">24067</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 NEWS
-rw-r--r--   <span style="color:#2aa198">1</span> kingzcheung  admin   <span style="color:#2aa198">5228</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 README.md
drwxr-xr-x  <span style="color:#2aa198">12</span> kingzcheung  admin    <span style="color:#2aa198">384</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 bin
-rw-r--r--   <span style="color:#2aa198">1</span> kingzcheung  admin    <span style="color:#2aa198">553</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 homebrew.mxcl.php.plist
drwxr-xr-x   <span style="color:#2aa198">3</span> kingzcheung  admin     <span style="color:#2aa198">96</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 include
drwxr-xr-x   <span style="color:#2aa198">4</span> kingzcheung  admin    <span style="color:#2aa198">128</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 lib
lrwxr-xr-x   <span style="color:#2aa198">1</span> kingzcheung  admin     <span style="color:#2aa198">26</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 pecl -&gt; /opt/homebrew/lib/php/pecl
drwxr-xr-x   <span style="color:#2aa198">3</span> kingzcheung  admin     <span style="color:#2aa198">96</span>  <span style="color:#2aa198">4</span> <span style="color:#2aa198">15</span> 18:38 sbin
drwxr-xr-x   <span style="color:#2aa198">4</span> kingzcheung  admin    <span style="color:#2aa198">128</span>  <span style="color:#2aa198">3</span>  <span style="color:#2aa198">3</span> 00:37 share
</code></pre></div><p>å‘ç° <code>pecl</code> æ˜¯ <code>/opt/homebrew/lib/php/pecl</code>çš„è½¯è¿æ¥ã€‚ä½†æ˜¯é€šè¿‡ å‘½ä»¤å‘ç° <code>/opt/homebrew/lib/php/pecl</code> å¹¶ä¸å­˜åœ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆ›å»ºæ­¤ç›®å½•ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mkdir /opt/homebrew/lib/php/pecl
</code></pre></div><p>é‡æ–°å®‰è£… swooleï¼Œæ‰€æœ‰é—®é¢˜è§£å†³ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ php --ri swoole

swoole

<span style="color:#268bd2">Swoole</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">Author</span> <span style="color:#719e07">=</span>&gt; Swoole Team &lt;team@swoole.com&gt;
<span style="color:#268bd2">Version</span> <span style="color:#719e07">=</span>&gt; 4.6.5
<span style="color:#268bd2">Built</span> <span style="color:#719e07">=</span>&gt; Apr <span style="color:#2aa198">16</span> <span style="color:#2aa198">2021</span> 10:24:12
<span style="color:#268bd2">coroutine</span> <span style="color:#719e07">=</span>&gt; enabled with boost asm context
<span style="color:#268bd2">kqueue</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">rwlock</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">sockets</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">openssl</span> <span style="color:#719e07">=</span>&gt; OpenSSL 1.1.1k  <span style="color:#2aa198">25</span> Mar <span style="color:#2aa198">2021</span>
<span style="color:#268bd2">dtls</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">http2</span> <span style="color:#719e07">=</span>&gt; enabled
curl-native <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">pcre</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">zlib</span> <span style="color:#719e07">=</span>&gt; 1.2.11
<span style="color:#268bd2">mysqlnd</span> <span style="color:#719e07">=</span>&gt; enabled
<span style="color:#268bd2">async_redis</span> <span style="color:#719e07">=</span>&gt; enabled

<span style="color:#268bd2">Directive</span> <span style="color:#719e07">=</span>&gt; Local <span style="color:#268bd2">Value</span> <span style="color:#719e07">=</span>&gt; Master Value
swoole.enable_coroutine <span style="color:#719e07">=</span>&gt; <span style="color:#268bd2">On</span> <span style="color:#719e07">=</span>&gt; On
swoole.enable_library <span style="color:#719e07">=</span>&gt; <span style="color:#268bd2">On</span> <span style="color:#719e07">=</span>&gt; On
swoole.enable_preemptive_scheduler <span style="color:#719e07">=</span>&gt; <span style="color:#268bd2">Off</span> <span style="color:#719e07">=</span>&gt; Off
swoole.display_errors <span style="color:#719e07">=</span>&gt; <span style="color:#268bd2">On</span> <span style="color:#719e07">=</span>&gt; On
swoole.use_shortname <span style="color:#719e07">=</span>&gt; <span style="color:#268bd2">On</span> <span style="color:#719e07">=</span>&gt; On
swoole.unixsock_buffer_size <span style="color:#719e07">=</span>&gt; <span style="color:#268bd2">262144</span> <span style="color:#719e07">=</span>&gt; <span style="color:#2aa198">262144</span>
</code></pre></div>
		</div>

		<div class="post-tags">
			
				
			
		</div>
		<div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'kingzcheung.com';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> Â© Copyright 2021 |  <a href="https://github.com/vividvilla/ezhil">Ezhil theme</a> | Built with <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script>feather.replace()</script>
</body>
</html>
